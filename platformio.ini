; PlatformIO Project Configuration File
; Peristaltic Pump Control System
; ESP32 with ESP-IDF Framework

[platformio]
default_envs = test_00_blink

; Common settings for all environments
[env]
platform = espressif32
board = esp32dev
framework = espidf
monitor_speed = 115200
monitor_filters =
    esp32_exception_decoder
    colorize
upload_speed = 921600

; Build flags common to all environments
build_flags =
    -DCORE_DEBUG_LEVEL=3
    -DCONFIG_ARDUHAL_LOG_COLORS=1
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue

; ============================================================================
; PHASE 1: BASIC HARDWARE TESTING
; ============================================================================

; Test 00: Blink and Serial Output
; Objective: Verify ESP32 is working and can be programmed
; Success: Built-in LED blinks, serial output visible
[env:test_00_blink]
build_src_filter =
    +<test_00_blink/>
    +<common/>
build_flags =
    ${env.build_flags}
    -DTEST_NAME=\"Blink_Test\"

; Test 01: Push Buttons
; Objective: Verify all 3 buttons (START, STOP, MODE) with internal pull-ups
; Hardware: GPIO 13 (START), GPIO 14 (MODE), GPIO 33 (STOP)
; Success: All buttons detected with proper debouncing
[env:test_01_buttons]
build_src_filter =
    +<test_01_buttons/>
    +<common/>
build_flags =
    ${env.build_flags}
    -DTEST_NAME=\"Button_Test\"

; Test 02: Rotary Encoder
; Objective: Verify encoder rotation and SELECT button
; Hardware: GPIO 26 (CLK), GPIO 27 (DT), GPIO 12 (SW/SELECT)
; Success: Rotation detected, SELECT button works
[env:test_02_encoder]
build_src_filter =
    +<test_02_encoder/>
    +<common/>
build_flags =
    ${env.build_flags}
    -DTEST_NAME=\"Encoder_Test\"

; ============================================================================
; PHASE 2: COMMUNICATION PERIPHERALS (Coming Soon)
; ============================================================================

; Test 03: I2C Scanner
; [env:test_03_i2c_scanner]

; Test 04: LCD Display
; [env:test_04_lcd]

; Test 05: WS2812B LED Strips
; [env:test_05_leds]

; Test 06: Digital Scale (RS232)
; [env:test_06_scale]

; ============================================================================
; PHASE 3: RS485 MOTOR CONTROL (Coming Soon)
; ============================================================================

; Test 07: RS485 Basic Communication
; [env:test_07_rs485_basic]

; Test 08: G-code Commands
; [env:test_08_gcode]

; Test 09: Single Motor
; [env:test_09_single_motor]

; Test 10: All Motors
; [env:test_10_all_motors]

; ============================================================================
; MAIN APPLICATION (Future)
; ============================================================================

; Main Application
; [env:main]
; build_src_filter =
;     +<main/>
;     +<common/>
