; PlatformIO Project Configuration File
; Peristaltic Pump Control System
; ESP32 with ESP-IDF Framework

[platformio]
default_envs = test_00_blink

; Common settings for all environments
[env]
platform = espressif32
board = esp32dev
framework = espidf
monitor_speed = 115200
monitor_filters =
    esp32_exception_decoder
    colorize
upload_speed = 921600

; Explicitly use ESP-IDF main/ directory (not src/)
board_build.embed_files =
board_build.esp-idf.sdkconfig_path = sdkconfig.defaults

; ============================================================================
; PHASE 1: BASIC HARDWARE TESTING
; ============================================================================

; Test 00: Blink and Serial Output
; Objective: Verify ESP32 is working and can be programmed
; Success: Built-in LED blinks, serial output visible
[env:test_00_blink]
extra_scripts = pre:test/scripts/copy_test_to_main.py

; Test 01: Push Buttons
; Objective: Verify all 3 buttons (START, STOP, MODE) with internal pull-ups
; Hardware: GPIO 13 (START), GPIO 14 (MODE), GPIO 33 (STOP)
; Success: All buttons detected with proper debouncing
[env:test_01_buttons]
extra_scripts = pre:test/scripts/copy_test_to_main.py

; Test 02: Rotary Encoder
; Objective: Verify encoder rotation and SELECT button
; Hardware: GPIO 26 (CLK), GPIO 27 (DT), GPIO 34 (SW/SELECT)
; Success: Rotation detected, SELECT button works
[env:test_02_encoder]
extra_scripts = pre:test/scripts/copy_test_to_main.py

; ============================================================================
; PHASE 2: COMMUNICATION PERIPHERALS (Coming Soon)
; ============================================================================

; Test 03: I2C Scanner
; [env:test_03_i2c_scanner]
; extra_scripts = pre:test/scripts/copy_test_to_main.py

; Test 04: LCD Display
; [env:test_04_lcd]
; extra_scripts = pre:test/scripts/copy_test_to_main.py

; Test 05: WS2812B LED Strips
; [env:test_05_leds]
; extra_scripts = pre:test/scripts/copy_test_to_main.py

; Test 06: Digital Scale (RS232)
; [env:test_06_scale]
; extra_scripts = pre:test/scripts/copy_test_to_main.py

; ============================================================================
; PHASE 3: RS485 MOTOR CONTROL (Coming Soon)
; ============================================================================

; Test 07: RS485 Basic Communication
; [env:test_07_rs485_basic]
; extra_scripts = pre:test/scripts/copy_test_to_main.py

; Test 08: G-code Commands
; [env:test_08_gcode]
; extra_scripts = pre:test/scripts/copy_test_to_main.py

; Test 09: Single Motor
; [env:test_09_single_motor]
; extra_scripts = pre:test/scripts/copy_test_to_main.py

; Test 10: All Motors
; [env:test_10_all_motors]
; extra_scripts = pre:test/scripts/copy_test_to_main.py

; ============================================================================
; MAIN APPLICATION (Future)
; ============================================================================

; Main Application - Phase 7
; [env:main]
; (no extra_scripts needed - uses main/main.c directly)
